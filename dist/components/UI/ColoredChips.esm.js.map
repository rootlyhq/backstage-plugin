{"version":3,"file":"ColoredChips.esm.js","sources":["../../../src/components/UI/ColoredChips.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Chip } from '@material-ui/core';\nimport { useApi } from '@backstage/core-plugin-api';\nimport LinkIcon from '@material-ui/icons/Link';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  RootlyService,\n  RootlyFunctionality,\n  RootlyEnvironment,\n  RootlyIncidentType,\n  RootlyTeam,\n} from '@rootly/backstage-plugin-common';\nimport { ColoredChip } from './ColoredChip';\n\nexport const ColoredChips = ({\n  objects,\n}: {\n  objects:\n    | RootlyService[]\n    | RootlyFunctionality[]\n    | RootlyEnvironment[]\n    | RootlyIncidentType[]\n    | RootlyTeam[];\n}) => {\n  const navigate = useNavigate();\n  const catalogApi = useApi(catalogApiRef);\n\n  const [componentUrls, setComponentUrls] = useState<Record<string, string>>({});\n\n  // Fetch component URLs incrementally\n  useEffect(() => {\n    if (!objects?.length) return;\n\n    const fetchComponentUrl = async (entityRef: string) => {\n      try {\n        const component = await catalogApi.getEntityByRef(entityRef);\n        if (component) {\n          setComponentUrls(prev => ({\n            ...prev,\n            [entityRef]: `/catalog/${component.metadata.namespace}/component/${component.metadata.name}`,\n          }));\n        }\n      } catch {\n        // No op\n      }\n    };\n\n    // Fetch each entityRef independently\n    objects.forEach(obj => {\n      const entityRef = (obj.attributes as any).backstage_id;\n      if (entityRef) {\n        fetchComponentUrl(entityRef);\n      }\n    });\n  }, [objects, catalogApi]);\n\n  if (objects?.length > 0) {\n    return (\n      <>\n        {objects.map(r => {\n          const entityRef = (r.attributes as any).backstage_id;\n          const url = componentUrls[entityRef];\n          return (\n            <ColoredChip\n              key={r.id}\n              label={r.attributes.name}\n              tooltip={r.attributes.description}\n              color={r.attributes.color}\n              onClick={url ? () => navigate(url) : () => {}}\n              icon={url ? <LinkIcon /> : undefined}\n            />\n          );\n        })}\n      </>\n    );\n  }\n\n  return <Chip label=\"N/A\" size=\"small\" />;\n};\n"],"names":[],"mappings":";;;;;;;;AAeO,MAAM,eAAe,CAAC;AAAA,EAC3B;AACF,CAAA,KAOM;AACJ,EAAA,MAAM,WAAW,WAAA,EAAY;AAC7B,EAAA,MAAM,UAAA,GAAa,OAAO,aAAa,CAAA;AAEvC,EAAA,MAAM,CAAC,aAAA,EAAe,gBAAgB,CAAA,GAAI,QAAA,CAAiC,EAAE,CAAA;AAG7E,EAAA,SAAA,CAAU,MAAM;AACd,IAAA,IAAI,CAAC,SAAS,MAAA,EAAQ;AAEtB,IAAA,MAAM,iBAAA,GAAoB,OAAO,SAAA,KAAsB;AACrD,MAAA,IAAI;AACF,QAAA,MAAM,SAAA,GAAY,MAAM,UAAA,CAAW,cAAA,CAAe,SAAS,CAAA;AAC3D,QAAA,IAAI,SAAA,EAAW;AACb,UAAA,gBAAA,CAAiB,CAAA,IAAA,MAAS;AAAA,YACxB,GAAG,IAAA;AAAA,YACH,CAAC,SAAS,GAAG,CAAA,SAAA,EAAY,SAAA,CAAU,SAAS,SAAS,CAAA,WAAA,EAAc,SAAA,CAAU,QAAA,CAAS,IAAI,CAAA;AAAA,WAC5F,CAAE,CAAA;AAAA,QACJ;AAAA,MACF,CAAA,CAAA,MAAQ;AAAA,MAER;AAAA,IACF,CAAA;AAGA,IAAA,OAAA,CAAQ,QAAQ,CAAA,GAAA,KAAO;AACrB,MAAA,MAAM,SAAA,GAAa,IAAI,UAAA,CAAmB,YAAA;AAC1C,MAAA,IAAI,SAAA,EAAW;AACb,QAAA,iBAAA,CAAkB,SAAS,CAAA;AAAA,MAC7B;AAAA,IACF,CAAC,CAAA;AAAA,EACH,CAAA,EAAG,CAAC,OAAA,EAAS,UAAU,CAAC,CAAA;AAExB,EAAA,IAAI,OAAA,EAAS,SAAS,CAAA,EAAG;AACvB,IAAA,uBACE,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACG,OAAA,CAAQ,GAAA,CAAI,CAAA,CAAA,KAAK;AAChB,MAAA,MAAM,SAAA,GAAa,EAAE,UAAA,CAAmB,YAAA;AACxC,MAAA,MAAM,GAAA,GAAM,cAAc,SAAS,CAAA;AACnC,MAAA,uBACE,KAAA,CAAA,aAAA;AAAA,QAAC,WAAA;AAAA,QAAA;AAAA,UACC,KAAK,CAAA,CAAE,EAAA;AAAA,UACP,KAAA,EAAO,EAAE,UAAA,CAAW,IAAA;AAAA,UACpB,OAAA,EAAS,EAAE,UAAA,CAAW,WAAA;AAAA,UACtB,KAAA,EAAO,EAAE,UAAA,CAAW,KAAA;AAAA,UACpB,SAAS,GAAA,GAAM,MAAM,QAAA,CAAS,GAAG,IAAI,MAAM;AAAA,UAAC,CAAA;AAAA,UAC5C,IAAA,EAAM,GAAA,mBAAM,KAAA,CAAA,aAAA,CAAC,QAAA,EAAA,IAAS,CAAA,GAAK;AAAA;AAAA,OAC7B;AAAA,IAEJ,CAAC,CACH,CAAA;AAAA,EAEJ;AAEA,EAAA,uBAAO,KAAA,CAAA,aAAA,CAAC,IAAA,EAAA,EAAK,KAAA,EAAM,KAAA,EAAM,MAAK,OAAA,EAAQ,CAAA;AACxC;;;;"}