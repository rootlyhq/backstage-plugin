{"version":3,"file":"DefaultRootlyPageLayout.esm.js","sources":["../../../src/components/RootlyPage/DefaultRootlyPageLayout.tsx"],"sourcesContent":["import { TabProps } from '@material-ui/core';\nimport { Children, default as React, Fragment, isValidElement } from 'react';\n\nimport { attachComponentData } from '@backstage/core-plugin-api';\nimport { Header, Page, RoutedTabs } from '@backstage/core-components';\n\ntype SubRoute = {\n  path: string;\n  title: string;\n  children: JSX.Element;\n  tabProps?: TabProps<React.ElementType, { component?: React.ElementType }>;\n};\n\nconst Route: (props: SubRoute) => null = () => null;\n\n// This causes all mount points that are discovered within this route to use the path of the route itself\nattachComponentData(Route, 'core.gatherMountPoints', true);\n\nfunction createSubRoutesFromChildren(\n  childrenProps: React.ReactNode,\n): SubRoute[] {\n  // Directly comparing child.type with Route will not work with in\n  // combination with react-hot-loader in storybook\n  // https://github.com/gaearon/react-hot-loader/issues/304\n  const routeType = (\n    <Route path=\"\" title=\"\">\n      <div />\n    </Route>\n  ).type;\n\n  return Children.toArray(childrenProps).flatMap(child => {\n    if (!isValidElement(child)) {\n      return [];\n    }\n\n    if (child.type === Fragment) {\n      return createSubRoutesFromChildren(child.props.children);\n    }\n\n    if (child.type !== routeType) {\n      throw new Error('Child of ExploreLayout must be an ExploreLayout.Route');\n    }\n\n    const { path, title, children, tabProps } = child.props;\n    return [{ path, title, children, tabProps }];\n  });\n}\n\ntype LayoutProps = {\n  children?: React.ReactNode;\n};\n\nexport const DefaultRootlyPageLayout = ({ children }: LayoutProps) => {\n  const routes = createSubRoutesFromChildren(children);\n\n  return (\n    <Page themeId=\"tool\">\n      <Header title=\"Rootly\" />\n\n      <RoutedTabs routes={routes} />\n    </Page>\n  );\n};\n\nDefaultRootlyPageLayout.Route = Route;\n"],"names":[],"mappings":";;;;AAaA,MAAM,QAAmC,MAAM,IAAA;AAG/C,mBAAA,CAAoB,KAAA,EAAO,0BAA0B,IAAI,CAAA;AAEzD,SAAS,4BACP,aAAA,EACY;AAIZ,EAAA,MAAM,SAAA,GAAA,iBACJ,KAAA,CAAA,aAAA,CAAC,KAAA,EAAA,EAAM,IAAA,EAAK,EAAA,EAAG,OAAM,EAAA,EAAA,kBACnB,KAAA,CAAA,aAAA,CAAC,KAAA,EAAA,IAAI,CACP,CAAA,EACA,IAAA;AAEF,EAAA,OAAO,QAAA,CAAS,OAAA,CAAQ,aAAa,CAAA,CAAE,QAAQ,CAAA,KAAA,KAAS;AACtD,IAAA,IAAI,CAAC,cAAA,CAAe,KAAK,CAAA,EAAG;AAC1B,MAAA,OAAO,EAAC;AAAA,IACV;AAEA,IAAA,IAAI,KAAA,CAAM,SAAS,QAAA,EAAU;AAC3B,MAAA,OAAO,2BAAA,CAA4B,KAAA,CAAM,KAAA,CAAM,QAAQ,CAAA;AAAA,IACzD;AAEA,IAAA,IAAI,KAAA,CAAM,SAAS,SAAA,EAAW;AAC5B,MAAA,MAAM,IAAI,MAAM,uDAAuD,CAAA;AAAA,IACzE;AAEA,IAAA,MAAM,EAAE,IAAA,EAAM,KAAA,EAAO,QAAA,EAAU,QAAA,KAAa,KAAA,CAAM,KAAA;AAClD,IAAA,OAAO,CAAC,EAAE,IAAA,EAAM,KAAA,EAAO,QAAA,EAAU,UAAU,CAAA;AAAA,EAC7C,CAAC,CAAA;AACH;AAMO,MAAM,uBAAA,GAA0B,CAAC,EAAE,QAAA,EAAS,KAAmB;AACpE,EAAA,MAAM,MAAA,GAAS,4BAA4B,QAAQ,CAAA;AAEnD,EAAA,uBACE,KAAA,CAAA,aAAA,CAAC,IAAA,EAAA,EAAK,OAAA,EAAQ,MAAA,EAAA,kBACZ,KAAA,CAAA,aAAA,CAAC,MAAA,EAAA,EAAO,KAAA,EAAM,QAAA,EAAS,CAAA,kBAEvB,KAAA,CAAA,aAAA,CAAC,UAAA,EAAA,EAAW,MAAA,EAAgB,CAC9B,CAAA;AAEJ;AAEA,uBAAA,CAAwB,KAAA,GAAQ,KAAA;;;;"}